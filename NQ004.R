
n<-4
(M<-matrix(NA,n,n))
(列数<-col(M))
(行数<-row(M))
(対角要素<-diag(列数))
(対角<-対角要素^2-対角要素+1)
(四角行列<-outer(対角,対角,"pmax"))
(差分<-列数-行数)
ans<-四角行列+差分 
ans